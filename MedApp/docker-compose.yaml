version: '3.8'

services:
 activemq:
  image: rmohr/activemq
  expose:
  - "8888"
  ports:
  - "5002:8161"
  - "8888:61616/tcp"
  networks:
      - front-tier

 mailer-service1:
  build: ./MailerWorker
  depends_on: 
   - activemq
  restart: always
  depends_on: [activemq]
  networks:
      - front-tier

 mailer-service2:
  build: ./MailerWorker
  depends_on: 
   - activemq
  restart: always
  depends_on: [activemq]
  networks:
      - front-tier

 mailer-service3:
  build: ./MailerWorker
  depends_on: 
   - activemq
  restart: always
  depends_on: [activemq]
  networks:
      - front-tier
networks:
  front-tier: